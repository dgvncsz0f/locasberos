# -*- mode: makefile-gmake; -*-

LOBJECT_FILES = $(addsuffix .lo, $(basename $(OBJECT_FILES)))

.PHONY:
compile: $(LOBJECT_FILES)

.PHONY:
lib: $(cfg_distdir)/$(TARGET_FILE)

%.la: $(LOBJECT_FILES)
	$(LIBTOOL) --mode=link $(CC) -o $@ $^ $(LDFLAGS)

%.lo: %.c
	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $^

.SUFFIX: .lo .la